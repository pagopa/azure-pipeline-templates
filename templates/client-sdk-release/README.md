# Autogenerated Client SDK Release template

A collection of one or more stages to generate the client SDK wiith models based on an OpenAPI spec. It does the following:

1. generate models and client code based on a give OpenAPI spec, using [@pagopa/openapi-codegen-ts](https://www.npmjs.com/package/@pagopa/openapi-codegen-ts)
1. generate package.json based on main package.json values (like name and version), using [@pagopa/openapi-codegen-ts](https://www.npmjs.com/package/@pagopa/openapi-codegen-ts)
1. publish the package to NPM

Be sure that this template is called **after** the main package.json has been updated.


## Usage

```yaml
resources:
  repositories:
    - repository: templates
      type: github
      name: pagopa/azure-devops-templates
      ref: refs/tags/v[n]



stages:
 - ...
 - stage: Release
   ...
  
 # Template for generating and deploying client SDk to NPM
 - template: templates/client-sdk-release/template.yaml@templates 
   parameters:
     dependsOn: Release
     openapiSpecPath: openapi/index.yaml

```

## Parameters

|param|description|default|required
|-|-|-|-|
|openapiSpecPath|The relative path of the OpenAPI spec from projectDir folder ||yes|
|dependsOn|The of the stage that performs the versioning ||no|
|projectDir|The project directory, in case of multi-project repo |.|no!
